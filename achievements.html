<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Achievements - Stretch It Out!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Courier+New&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .math { font-family: 'Courier New', monospace; }
        .achievement-card { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);
        }
        .achievement-card:hover { 
            transform: translateY(-8px) scale(1.02); 
            box-shadow: 0 16px 32px rgba(0,0,0,0.15);
        }
        .achievement-card.unlocked { 
            background: linear-gradient(135deg, #FFF9C4 0%, #FFE082 100%);
            border: 2px solid #F57F17;
        }
        .achievement-card.locked { 
            background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
            border: 2px solid #BDBDBD;
            opacity: 0.7;
        }
        .badge-icon { 
            font-size: 3rem; 
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        .badge-icon.unlocked { animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow {
            from { filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)) drop-shadow(0 0 10px rgba(255, 202, 40, 0.3)); }
            to { filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)) drop-shadow(0 0 20px rgba(255, 202, 40, 0.6)); }
        }
        .progress-ring { 
            transform: rotate(-90deg); 
            transition: all 0.5s ease;
        }
        .stat-card { 
            background: linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%);
            border-left: 4px solid var(--accent-color);
            transition: all 0.3s ease;
        }
        .stat-card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .leaderboard-item { 
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        .leaderboard-item:hover { 
            background-color: #F8F9FA;
            border-left-color: #1976D2;
        }
        .leaderboard-item.current-user { 
            background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
            border-left-color: #1976D2;
        }
        .xp-bar { 
            background: linear-gradient(90deg, #FFE082 0%, #FFCA28 100%);
            height: 8px;
            border-radius: 4px;
            transition: width 1s ease-out;
        }
        .confetti-canvas { position: fixed; top: 0; left: 0; z-index: -1; }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50">
    <!-- Home Button -->
    <button onclick="navigateTo('index.html')" class="fixed top-4 left-4 w-10 h-10 bg-purple-600 text-white rounded-full flex items-center justify-center hover:bg-purple-700 transition-all duration-300 z-50 shadow-lg">
        <span class="text-lg">üè†</span>
    </button>

    <!-- Header -->
    <div class="bg-gradient-to-r from-yellow-400 to-orange-400 py-8">
        <div class="container mx-auto px-8">
            <h1 class="text-5xl font-bold text-center text-orange-900 mb-2">Your Achievements!</h1>
            <p class="text-center text-orange-800 text-lg">Track your progress and unlock new challenges</p>
        </div>
    </div>

    <!-- XP & Level Section -->
    <div class="container mx-auto px-8 py-8">
        <div class="bg-white rounded-3xl shadow-xl p-8 mb-8">
            <div class="flex items-center justify-center space-x-12">
                <!-- Level Display -->
                <div class="text-center">
                    <div class="relative w-32 h-32 mb-4">
                        <svg class="w-32 h-32 progress-ring" viewBox="0 0 36 36">
                            <path class="text-gray-200" stroke="currentColor" stroke-width="2" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                            <path id="xpProgressPath" class="text-yellow-500" stroke="currentColor" stroke-width="2" fill="none" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <span id="currentLevel" class="text-3xl font-bold text-gray-800">3</span>
                            <span class="text-xs text-gray-600">Level</span>
                        </div>
                    </div>
                </div>

                <!-- XP Info -->
                <div class="text-center">
                    <div class="text-4xl font-bold text-orange-600 mb-2" id="currentXP">230</div>
                    <div class="text-gray-600 mb-4">Current XP</div>
                    <div class="w-48 bg-gray-200 rounded-full h-2 mb-2">
                        <div id="xpProgressBar" class="xp-bar" style="width: 76.7%"></div>
                    </div>
                    <div class="text-sm text-gray-500">
                        <span id="xpProgress">230</span> / <span id="xpRequired">300</span> XP to next level
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="text-center">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-blue-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-blue-600" id="questionsAnswered">12</div>
                            <div class="text-sm text-blue-800">Questions</div>
                        </div>
                        <div class="bg-green-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-green-600" id="accuracyRate">85%</div>
                            <div class="text-sm text-green-800">Accuracy</div>
                        </div>
                        <div class="bg-orange-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-orange-600" id="bestStreak">7</div>
                            <div class="text-sm text-orange-800">Best Streak</div>
                        </div>
                        <div class="bg-purple-50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-purple-600" id="badgesEarned">2</div>
                            <div class="text-sm text-purple-800">Badges</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievement Badges -->
        <div class="bg-white rounded-3xl shadow-xl p-8 mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Achievement Badges</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Stretch Master Badge -->
                <div class="achievement-card unlocked rounded-2xl p-6 text-center">
                    <div class="badge-icon unlocked mb-4">‚≠ê</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Stretch Master</h3>
                    <p class="text-gray-600 mb-4">Complete all vertical transformations</p>
                    <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">
                        ‚úÖ Unlocked
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Progress: 8/10 vertical transformations
                    </div>
                </div>

                <!-- Shrink Pro Badge -->
                <div class="achievement-card unlocked rounded-2xl p-6 text-center">
                    <div class="badge-icon unlocked mb-4">üí´</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Shrink Pro</h3>
                    <p class="text-gray-600 mb-4">Master horizontal shrink transformations</p>
                    <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">
                        ‚úÖ Unlocked
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Completed 15 horizontal shrinks
                    </div>
                </div>

                <!-- Hint Explorer Badge -->
                <div class="achievement-card locked rounded-2xl p-6 text-center">
                    <div class="badge-icon mb-4">üß©</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Hint Explorer</h3>
                    <p class="text-gray-600 mb-4">Use all hint steps</p>
                    <div class="bg-gray-200 text-gray-600 px-3 py-1 rounded-full text-sm font-semibold">
                        üîí Locked
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Progress: 3/4 hint steps used
                    </div>
                </div>

                <!-- Quiz Champion Badge -->
                <div class="achievement-card locked rounded-2xl p-6 text-center">
                    <div class="badge-icon mb-4">üéØ</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Quiz Champion</h3>
                    <p class="text-gray-600 mb-4">Score 100% on master quiz</p>
                    <div class="bg-gray-200 text-gray-600 px-3 py-1 rounded-full text-sm font-semibold">
                        üîí Locked
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Best score: 85%
                    </div>
                </div>

                <!-- Speed Demon Badge -->
                <div class="achievement-card locked rounded-2xl p-6 text-center">
                    <div class="badge-icon mb-4">‚ö°</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Speed Demon</h3>
                    <p class="text-gray-600 mb-4">Complete rapid fire under 5 minutes</p>
                    <div class="bg-gray-200 text-gray-600 px-3 py-1 rounded-full text-sm font-semibold">
                        üîí Locked
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Best time: 7:23
                    </div>
                </div>

                <!-- Equation Architect Badge -->
                <div class="achievement-card locked rounded-2xl p-6 text-center">
                    <div class="badge-icon mb-4">üîß</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Equation Architect</h3>
                    <p class="text-gray-600 mb-4">Build 30 equations correctly</p>
                    <div class="bg-gray-200 text-gray-600 px-3 py-1 rounded-full text-sm font-semibold">
                        üîí Locked
                    </div>
                    <div class="mt-3 text-xs text-gray-500">
                        Progress: 18/30 equations
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Dashboard -->
        <div class="bg-white rounded-3xl shadow-xl p-8 mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Learning Statistics</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Questions Attempted -->
                <div class="stat-card rounded-xl p-6" style="--accent-color: #1976D2;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Questions Attempted</h3>
                        <div class="text-2xl">üìä</div>
                    </div>
                    <div class="text-3xl font-bold text-blue-600 mb-2" id="questionsStat">12</div>
                    <div class="text-sm text-gray-600">Out of 30 total questions</div>
                    <div class="mt-3 bg-blue-100 rounded-full h-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 40%"></div>
                    </div>
                </div>

                <!-- Accuracy Rate -->
                <div class="stat-card rounded-xl p-6" style="--accent-color: #43A047;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Accuracy Rate</h3>
                        <div class="text-2xl">üéØ</div>
                    </div>
                    <div class="text-3xl font-bold text-green-600 mb-2" id="accuracyStat">85%</div>
                    <div class="text-sm text-gray-600">Last 10 questions</div>
                    <div class="mt-3 bg-green-100 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                    </div>
                </div>

                <!-- Time Studied -->
                <div class="stat-card rounded-xl p-6" style="--accent-color: #9C27B0;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Time Studied</h3>
                        <div class="text-2xl">‚è±Ô∏è</div>
                    </div>
                    <div class="text-3xl font-bold text-purple-600 mb-2" id="timeStat">2h 15m</div>
                    <div class="text-sm text-gray-600">Total study time</div>
                    <div class="mt-3 bg-purple-100 rounded-full h-2">
                        <div class="bg-purple-500 h-2 rounded-full" style="width: 75%"></div>
                    </div>
                </div>

                <!-- Functions Mastered -->
                <div class="stat-card rounded-xl p-6" style="--accent-color: #009688;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Functions Mastered</h3>
                        <div class="text-2xl">üìà</div>
                    </div>
                    <div class="text-3xl font-bold text-teal-600 mb-2" id="functionsStat">3</div>
                    <div class="text-sm text-gray-600">Out of 10 function types</div>
                    <div class="mt-3 bg-teal-100 rounded-full h-2">
                        <div class="bg-teal-500 h-2 rounded-full" style="width: 30%"></div>
                    </div>
                </div>

                <!-- Best Streak -->
                <div class="stat-card rounded-xl p-6" style="--accent-color: #FF9800;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Best Streak</h3>
                        <div class="text-2xl">üî•</div>
                    </div>
                    <div class="text-3xl font-bold text-orange-600 mb-2" id="streakStat">7</div>
                    <div class="text-sm text-gray-600">Consecutive correct answers</div>
                    <div class="mt-3 bg-orange-100 rounded-full h-2">
                        <div class="bg-orange-500 h-2 rounded-full" style="width: 70%"></div>
                    </div>
                </div>

                <!-- Badges Earned -->
                <div class="stat-card rounded-xl p-6" style="--accent-color: #FFC107;">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-800">Badges Earned</h3>
                        <div class="text-2xl">üèÜ</div>
                    </div>
                    <div class="text-3xl font-bold text-yellow-600 mb-2" id="badgesStat">2</div>
                    <div class="text-sm text-gray-600">Out of 6 total badges</div>
                    <div class="mt-3 bg-yellow-100 rounded-full h-2">
                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 33%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="bg-white rounded-3xl shadow-xl p-8 mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">Leaderboard</h2>
            
            <div class="space-y-4">
                <!-- Top 3 -->
                <div class="leaderboard-item flex items-center justify-between p-4 rounded-xl">
                    <div class="flex items-center space-x-4">
                        <div class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold">1</div>
                        <div class="w-10 h-10 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full flex items-center justify-center">üëë</div>
                        <div>
                            <div class="font-semibold text-gray-800">MathMaster</div>
                            <div class="text-sm text-gray-600">Level 8 ‚Ä¢ 850 XP</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold text-yellow-600">6/6</div>
                        <div class="text-sm text-gray-600">Badges</div>
                    </div>
                </div>

                <div class="leaderboard-item flex items-center justify-between p-4 rounded-xl">
                    <div class="flex items-center space-x-4">
                        <div class="w-8 h-8 bg-gray-400 rounded-full flex items-center justify-center text-white font-bold">2</div>
                        <div class="w-10 h-10 bg-gradient-to-r from-gray-300 to-gray-500 rounded-full flex items-center justify-center">ü•à</div>
                        <div>
                            <div class="font-semibold text-gray-800">FunctionPro</div>
                            <div class="text-sm text-gray-600">Level 6 ‚Ä¢ 620 XP</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold text-gray-600">5/6</div>
                        <div class="text-sm text-gray-600">Badges</div>
                    </div>
                </div>

                <div class="leaderboard-item flex items-center justify-between p-4 rounded-xl">
                    <div class="flex items-center space-x-4">
                        <div class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold">3</div>
                        <div class="w-10 h-10 bg-gradient-to-r from-orange-300 to-orange-600 rounded-full flex items-center justify-center">ü•â</div>
                        <div>
                            <div class="font-semibold text-gray-800">TransformExpert</div>
                            <div class="text-sm text-gray-600">Level 5 ‚Ä¢ 480 XP</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold text-orange-600">4/6</div>
                        <div class="text-sm text-gray-600">Badges</div>
                    </div>
                </div>

                <!-- Current User -->
                <div class="leaderboard-item current-user flex items-center justify-between p-4 rounded-xl border-2 border-blue-300">
                    <div class="flex items-center space-x-4">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold">8</div>
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full flex items-center justify-center">üöÄ</div>
                        <div>
                            <div class="font-semibold text-gray-800">You</div>
                            <div class="text-sm text-gray-600">Level 3 ‚Ä¢ 230 XP</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold text-blue-600">2/6</div>
                        <div class="text-sm text-gray-600">Badges</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-center space-x-6 mb-8">
            <button onclick="navigateTo('index.html')" class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-full font-semibold transition-all transform hover:scale-105 shadow-lg">
                üß© Continue Learning
            </button>
            <button onclick="navigateTo('rapid-fire.html')" class="bg-orange-500 hover:bg-orange-600 text-white px-8 py-4 rounded-full font-semibold transition-all transform hover:scale-105 shadow-lg">
                ‚ö° Speed Challenge
            </button>
            <button onclick="shareProgress()" class="bg-green-500 hover:bg-green-600 text-white px-8 py-4 rounded-full font-semibold transition-all transform hover:scale-105 shadow-lg">
                üì§ Share Progress
            </button>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <div id="confettiCanvas" class="confetti-canvas"></div>

    <script>
        // Achievement data
        const achievements = [
            { id: 'stretch-master', name: 'Stretch Master', icon: '‚≠ê', description: 'Complete all vertical transformations', unlocked: true, progress: 8, total: 10 },
            { id: 'shrink-pro', name: 'Shrink Pro', icon: 'üí´', description: 'Master horizontal shrink transformations', unlocked: true, progress: 15, total: 15 },
            { id: 'hint-explorer', name: 'Hint Explorer', icon: 'üß©', description: 'Use all hint steps', unlocked: false, progress: 3, total: 4 },
            { id: 'quiz-champion', name: 'Quiz Champion', icon: 'üéØ', description: 'Score 100% on master quiz', unlocked: false, progress: 85, total: 100 },
            { id: 'speed-demon', name: 'Speed Demon', icon: '‚ö°', description: 'Complete rapid fire under 5 minutes', unlocked: false, progress: 443, total: 300 },
            { id: 'equation-architect', name: 'Equation Architect', icon: 'üîß', description: 'Build 30 equations correctly', unlocked: false, progress: 18, total: 30 }
        ];

        // User stats
        const userStats = {
            level: 3,
            xp: 230,
            xpRequired: 300,
            questionsAnswered: 12,
            accuracyRate: 85,
            bestStreak: 7,
            badgesEarned: 2,
            functionsMastered: 3,
            timeStudied: '2h 15m'
        };

        // Initialize page
        function initPage() {
            updateXPProgress();
            updateStats();
            animateEntrance();
            checkForNewAchievements();
        }

        // Update XP progress ring
        function updateXPProgress() {
            const percentage = (userStats.xp / userStats.xpRequired) * 100;
            const circumference = 2 * Math.PI * 15.9155;
            const offset = circumference - (percentage / 100) * circumference;
            
            anime({
                targets: '#xpProgressPath',
                strokeDasharray: `${percentage}, 100`,
                duration: 2000,
                easing: 'easeOutCubic'
            });

            anime({
                targets: '#xpProgressBar',
                width: `${percentage}%`,
                duration: 2000,
                easing: 'easeOutCubic'
            });

            // Update text values
            document.getElementById('currentLevel').textContent = userStats.level;
            document.getElementById('currentXP').textContent = userStats.xp;
            document.getElementById('xpProgress').textContent = userStats.xp;
            document.getElementById('xpRequired').textContent = userStats.xpRequired;
        }

        // Update statistics
        function updateStats() {
            document.getElementById('questionsAnswered').textContent = userStats.questionsAnswered;
            document.getElementById('accuracyRate').textContent = userStats.accuracyRate + '%';
            document.getElementById('bestStreak').textContent = userStats.bestStreak;
            document.getElementById('badgesEarned').textContent = userStats.badgesEarned;
            
            // Update stat cards
            document.getElementById('questionsStat').textContent = userStats.questionsAnswered;
            document.getElementById('accuracyStat').textContent = userStats.accuracyRate + '%';
            document.getElementById('timeStat').textContent = userStats.timeStudied;
            document.getElementById('functionsStat').textContent = userStats.functionsMastered;
            document.getElementById('streakStat').textContent = userStats.bestStreak;
            document.getElementById('badgesStat').textContent = userStats.badgesEarned;
        }

        // Animate page entrance
        function animateEntrance() {
            // Animate achievement cards
            anime({
                targets: '.achievement-card',
                translateY: [50, 0],
                opacity: [0, 1],
                delay: anime.stagger(200, {start: 500}),
                duration: 800,
                easing: 'easeOutCubic'
            });

            // Animate stat cards
            anime({
                targets: '.stat-card',
                translateX: [-30, 0],
                opacity: [0, 1],
                delay: anime.stagger(150, {start: 1000}),
                duration: 600,
                easing: 'easeOutCubic'
            });

            // Animate leaderboard items
            anime({
                targets: '.leaderboard-item',
                translateX: [50, 0],
                opacity: [0, 1],
                delay: anime.stagger(100, {start: 1500}),
                duration: 500,
                easing: 'easeOutCubic'
            });
        }

        // Check for new achievements
        function checkForNewAchievements() {
            achievements.forEach((achievement, index) => {
                if (achievement.unlocked && index < 2) { // First two are unlocked
                    setTimeout(() => {
                        triggerAchievementAnimation(index);
                    }, 2000 + index * 500);
                }
            });
        }

        // Trigger achievement unlock animation
        function triggerAchievementAnimation(index) {
            const card = document.querySelectorAll('.achievement-card')[index];
            
            anime({
                targets: card,
                scale: [1, 1.1, 1],
                duration: 600,
                easing: 'easeOutBack'
            });

            // Trigger confetti
            triggerConfetti();
        }

        // Trigger confetti animation
        function triggerConfetti() {
            // Create confetti particles
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'fixed';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#FFB6C1'][Math.floor(Math.random() * 6)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.borderRadius = '50%';
                confetti.style.zIndex = '9999';
                document.body.appendChild(confetti);
                
                anime({
                    targets: confetti,
                    translateY: window.innerHeight + 100,
                    translateX: (Math.random() - 0.5) * 200,
                    rotate: Math.random() * 360,
                    duration: 3000 + Math.random() * 2000,
                    easing: 'easeInQuad',
                    complete: () => {
                        confetti.remove();
                    }
                });
            }
        }

        // Share progress
        function shareProgress() {
            const shareText = `I'm learning function transformations with Stretch It Out! üöÄ\n\nLevel ${userStats.level} ‚Ä¢ ${userStats.xp} XP\n${userStats.badgesEarned}/6 badges earned\n${userStats.accuracyRate}% accuracy rate`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Stretch It Out! - Math Learning Progress',
                    text: shareText,
                    url: window.location.origin
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Progress copied to clipboard! üìã');
                });
            }
        }

        // Navigation
        function navigateTo(page) {
            anime({
                targets: 'body',
                opacity: [1, 0.8],
                duration: 300,
                complete: () => {
                    window.location.href = page;
                }
            });
        }

        // Simulate XP gain
        function gainXP(amount) {
            userStats.xp += amount;
            
            // Check for level up
            if (userStats.xp >= userStats.xpRequired) {
                userStats.level++;
                userStats.xp = userStats.xp - userStats.xpRequired;
                userStats.xpRequired = Math.floor(userStats.xpRequired * 1.2);
                
                // Level up animation
                anime({
                    targets: '#currentLevel',
                    scale: [1, 1.5, 1],
                    color: ['#374151', '#F59E0B', '#374151'],
                    duration: 1000,
                    easing: 'easeOutBack'
                });
                
                triggerConfetti();
            }
            
            updateXPProgress();
            updateStats();
        }

        // Add hover effects to achievement cards
        document.addEventListener('DOMContentLoaded', function() {
            const achievementCards = document.querySelectorAll('.achievement-card');
            
            achievementCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    if (this.classList.contains('unlocked')) {
                        anime({
                            targets: this.querySelector('.badge-icon'),
                            scale: [1, 1.1],
                            duration: 300,
                            easing: 'easeOutCubic'
                        });
                    }
                });
                
                card.addEventListener('mouseleave', function() {
                    anime({
                        targets: this.querySelector('.badge-icon'),
                        scale: [1.1, 1],
                        duration: 300,
                        easing: 'easeOutCubic'
                    });
                });
            });
            
            initPage();
        });

        // Simulate real-time updates
        setInterval(() => {
            // Randomly update some stats to simulate progress
            if (Math.random() < 0.1) { // 10% chance every 5 seconds
                const statIncrease = Math.floor(Math.random() * 3) + 1;
                userStats.questionsAnswered += statIncrease;
                userStats.xp += statIncrease * 5;
                
                updateStats();
                updateXPProgress();
            }
        }, 5000);
    </script>
</body>
</html>